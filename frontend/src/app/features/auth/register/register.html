<div class="container-fluid">
    <div class="row justify-content-center align-items-center min-vh-100 py-4">
        <div class="col-lg-5 col-md-7 col-sm-9">
            <div class="card shadow-sm border-0">
                <div class="card-body p-4">
                    <div class="text-center mb-4">
                        <h2 class="h4 mb-2">Create Your Account</h2>
                        <p class="text-muted">Join our medical platform</p>
                    </div>

                    <!-- Role Toggle -->
                    <div class="text-center mb-4">
                        <p class="mb-2">
                            Registering as:
                            <strong>{{ formControls["role"].value }}</strong>
                        </p>
                        <button
                            type="button"
                            class="btn btn-outline-secondary btn-sm"
                            (click)="toggleRole()"
                        >
                            Switch to
                            {{
                                formControls["role"].value === "PATIENT"
                                    ? "Doctor"
                                    : "Patient"
                            }}
                        </button>
                    </div>

                    <form
                        [formGroup]="registerForm"
                        (ngSubmit)="onSubmit()"
                        novalidate
                    >
                        <!-- Basic Info -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="firstName" class="form-label"
                                    >First Name</label
                                >
                                <input
                                    id="firstName"
                                    type="text"
                                    class="form-control"
                                    formControlName="firstName"
                                />
                            </div>
                            <div class="col-md-6">
                                <label for="lastName" class="form-label"
                                    >Last Name</label
                                >
                                <input
                                    id="lastName"
                                    type="text"
                                    class="form-control"
                                    formControlName="lastName"
                                />
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label"
                                >Email Address</label
                            >
                            <input
                                id="email"
                                type="email"
                                class="form-control"
                                formControlName="email"
                            />
                        </div>

                        <div class="mb-3">
                            <label for="password" class="form-label"
                                >Password</label
                            >
                            <input
                                id="password"
                                type="password"
                                class="form-control"
                                formControlName="password"
                            />
                        </div>

                        <!-- Patient Fields -->
                        @if (formControls["role"].value === "PATIENT") {
                            <div class="mb-3">
                                <label for="dateOfBirth" class="form-label"
                                    >Date of Birth</label
                                >
                                <input
                                    id="dateOfBirth"
                                    type="date"
                                    class="form-control"
                                    formControlName="dateOfBirth"
                                />
                            </div>
                            <div class="mb-3">
                                <label for="phoneNumber" class="form-label"
                                    >Phone Number</label
                                >
                                <input
                                    id="phoneNumber"
                                    type="tel"
                                    class="form-control"
                                    formControlName="phoneNumber"
                                />
                            </div>
                            <div class="mb-3">
                                <label for="address" class="form-label"
                                    >Address</label
                                >
                                <input
                                    id="address"
                                    type="text"
                                    class="form-control"
                                    formControlName="address"
                                />
                            </div>
                            <div class="mb-3">
                                <label for="gender" class="form-label"
                                    >Gender</label
                                >
                                <select
                                    id="gender"
                                    class="form-select"
                                    formControlName="gender"
                                >
                                    <option value="">Select Gender</option>
                                    <option value="MALE">Male</option>
                                    <option value="FEMALE">Female</option>
                                    <option value="OTHER">Other</option>
                                </select>
                            </div>
                        }

                        <!-- Doctor Fields -->
                        @if (formControls["role"].value === "DOCTOR") {
                            <div class="mb-3">
                                <label for="specialization" class="form-label"
                                    >Specialization</label
                                >
                                <input
                                    id="specialization"
                                    type="text"
                                    class="form-control"
                                    formControlName="specialization"
                                />
                            </div>
                            <div class="mb-3">
                                <label for="department" class="form-label"
                                    >Department</label
                                >
                                <input
                                    id="department"
                                    type="text"
                                    class="form-control"
                                    formControlName="department"
                                />
                            </div>
                        }

                        <button
                            type="submit"
                            class="btn btn-primary w-100 mb-3"
                            [disabled]="registerForm.invalid"
                        >
                            Register
                        </button>

                        <div class="text-center">
                            <a
                                routerLink="/login"
                                class="btn btn-outline-primary w-100"
                            >
                                Already have an account? Login here
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
